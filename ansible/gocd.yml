---
-
        name: Configure gocd-server
        hosts: gocd-server
        tasks:
                - name: Execute command 'hostname'
                  command: hostname

                - name: Execute command 'date'
                  command: date

                - name: Install git
                  apt:
                          name: git
                          state: present

                - name: Install ansible
                  apt:
                          name: ansible
                          state: present
                          
                - name: Create terraform directory
                  file:
                        path: /opt/terraform 
                        state: directory                          
                          
                - name: Copy terraform executable
                  copy:
                    src: /opt/terraform/terraform
                    dest: /opt/terraform/terraform
                    owner: root
                    group: root
                    mode: '0755'
                
                - name: Copy terraform provider
                  copy:
                    src: /infra-as-code-challenge/terraform/provider.tf
                    dest: /infra-as-code-challenge/terraform/
                    owner: root
                    group: root
                    mode: '0644'

                - name: Copy terraform vars
                  copy:
                    src: /infra-as-code-challenge/terraform/terraform.tfvars
                    dest: /infra-as-code-challenge/terraform/
                    owner: root
                    group: root
                    mode: '0644'
